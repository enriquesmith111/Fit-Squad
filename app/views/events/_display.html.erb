<% @events_random = @events.order('RANDOM()').limit(@events.count) %>
<% @events_random.each do |event| %>
  <div class="event-card">
    <%# front of the card %>
    <div class="cover" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0)40%, rgba(0, 0, 0, 0.9)80%), url(<%= image_url(event.event_image) %>)">

      <h1 class="card-address"><i class="fa">&#xf041;</i>
        <%# <% first_line_of_address = event.address.split(',').first.strip %>
        <%# <%= first_line_of_address %>
      </h1>
      <h1 class="event-card-title">
        <%= event.name %>
      </h1>
      <h2 class="card-time-date">
        <% date = event.date %>
        <% time = event.time %>
        <%= Time.parse(date.strftime("%Y-%m-%d")).strftime("%d/%m/%y") %>,
        <%= Time.parse(time.strftime("%I:%M%P")).strftime("%I:%M%P") %>
      </h2>

      <%# back of the card %>
      <div class="card-back">

        <p class="event-card-host">
        <%if event.group.user.avatar.nil?%>
        <%=image_tag "blank_avatar.jpg", class: "avatar-bordered"%>
        <%else%>
          <%= image_tag event.group.user.avatar, class: "avatar" %>
          <%end%>
          Hosted by <strong> <%= event.group.user.name%> </strong>
        </p>
      <br>
        <h3 class="event-card-title-back"><%= event.name %></h3>
      <br>
      <div class="event-card-description-box">
        <p class="event-card-description">
          <%= event.description  %>
        </p>
      <h3>
        <%= link_to 'More Details', group_event_path(event.group_id, event.id) %>
      </h3>
      </div>
        <a class="card-join-button" href="#">Join</a>
      </div>
    </div>
  </div>
<% end %>
